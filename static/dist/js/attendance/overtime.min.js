!function t(e,n,i){function a(r,d){if(!n[r]){if(!e[r]){var s="function"==typeof require&&require;if(!d&&s)return s(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return a(n?n:t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,n){"use strict";window.app={modules:{"import":t("./../modules/attendance/overtime/import"),edit:t("./../modules/attendance/overtime/edit")},init:function(){var t=this;t.$document=$(document),$("#J-table-wrap").css({height:$(window).height()-170}),$.each(t.modules,function(e,n){n.init(t)})}},$(function(){app.init()})},{"./../modules/attendance/overtime/edit":2,"./../modules/attendance/overtime/import":3}],2:[function(t,e,n){"use strict";e.exports={data:null,init:function(t){var e=this;e.parent=t,e.bindEvents()},bindEvents:function(){var t=this;$("#J-update-btn").on("click",function(){$("#J-list").find("tr.J-employee").each(function(){var t=$(this),e=0,n=0;t.find("td.J-item").each(function(){$(this).hasClass("status-holiday")?n+=1*$(this).find("input[name=list_item]").val():e+=1*$(this).find("input[name=list_item]").val()}),t.find("input[name=work_day_total]").val(e),t.find("input[name=holiday_total]").val(n),t.find("input[name=total]").val(e+n)})}),t.parent.$document.on("click","th.J-set-holiday",function(t){$("#J-list").find("td.J-item-"+$(this).data("index")).toggleClass("status-holiday")})}}},{}],3:[function(t,e,n){"use strict";e.exports={dayName:["日","一","二","三","四","五","六"],init:function(t){var e=this;e.parent=t,e.bindEvents()},importData:function(){var t=this,e=new FormData(document.getElementById("J-form"));$.ajax({url:"/attendanceMod/overtime/import",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,beforeSend:function(){H.Loading.show()},success:function(e){0==e.code?t.renderList(e.data):H.alert(e.msg)},error:function(){},complete:function(){H.Loading.hide()}})},renderList:function(t){var e=this,n=30,i=[],a=[],o="";2==t.month?n=e.isSpYear(t.year)?29:28:-1!=$.inArray(t.month,[1,3,5,7,8,10,12])&&(n=31);for(var r=0;n>r;r++){var d=new Date(t.year+"-"+t.month+"-"+(r+1)),s=d.getDay(),u=d.getDate();(0==s||6==s)&&a.push(r),i.push({date:u>10?u.toString():"0"+u,dayName:e.dayName[s]})}for(var r=0,c=31-n;c>r;r++){var d=new Date(t.year+"-"+(t.month+1)+"-"+(r+1)),s=d.getDay(),u=d.getDate();(0==s||6==s)&&a.push(n+r),i.push({date:u>10?u.toString:"0"+u,dayName:e.dayName[s]})}e.parent.modules.edit.data={isWeekendList:a,th:i,year:t.year,month:t.month,detail:t.detail},o=H.template($("#J-list-tpl").html(),e.parent.modules.edit.data),$("#J-table-wrap").html(o)},isSpYear:function(t){return t%100==0&&t%400==0||t%100!=0&&t%4==0?!0:!1},bindEvents:function(){var t=this;$("#J-upload-btn").on("click",function(){t.importData()}),$("#J-form").find("input[type=file]").on("change",function(t){$(this).next().text(t.currentTarget.files[0].name)})}}},{}]},{},[1]);