!function t(e,n,i){function a(o,u){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var d=n[o]={exports:{}};e[o][0].call(d.exports,function(t){var n=e[o][1][t];return a(n?n:t)},d,d.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,e,n){"use strict";window.app={modules:{"import":t("./../modules/attendance/statistics/import"),edit:t("./../modules/attendance/statistics/edit")},init:function(){var t=this;t.$document=$(document),$("#J-table-wrap").css({height:$(window).height()-170}),$.each(t.modules,function(e,n){n.init(t)})}},$(function(){app.init()})},{"./../modules/attendance/statistics/edit":2,"./../modules/attendance/statistics/import":3}],2:[function(t,e,n){"use strict";e.exports={data:null,init:function(t){var e=this;e.parent=t,e.bindEvents()},bindEvents:function(){var t=this;t.parent.$document.on("input","#J-list input",function(e){var n=$(this),i=n.attr("name"),a=n.data("index"),r=n.data("subIndex"),o=t.data.total,u=t.data.list[a],s=u.list[r];(isNaN(1*n.val())||1*n.val()<0)&&n.val(0),n.val().length>1&&0==n.val().indexOf("0")&&0==n.val().indexOf(".")&&n.val(1*n.val()),"name"==i?s[i]=n.val():(u[i]=u[i]-s[i]+1*n.val(),o[i]=o[i]-s[i]+1*n.val(),s[i]=n.val(),$("#J-list").find("tr.J-sub-total").eq(a).find("input[name="+i+"]").val(u[i]),$("#J-list").find("tr.J-total").find("input[name="+i+"]").val(o[i]),-1!=$.inArray(i,["should_arrive","actual_arrive"])&&(s.per=1*(s.actual_arrive/s.should_arrive*100).toFixed(1),u.per=1*(u.actual_arrive/u.should_arrive*100).toFixed(1),o.per=1*(o.actual_arrive/o.should_arrive*100).toFixed(1),$("#J-employee-"+a+"-"+r).find("input[name=per]").val(s.per),$("#J-list").find("tr.J-sub-total").eq(a).find("input[name=per]").val(u.per),$("#J-list").find("tr.J-total").find("input[name=per]").val(o.per)))})}}},{}],3:[function(t,e,n){"use strict";e.exports={init:function(t){var e=this;e.parent=t,e.bindEvents()},importData:function(){var t=this,e=new FormData(document.getElementById("J-form"));$.ajax({url:"/attendanceMod/import",type:"POST",data:e,cache:!1,contentType:!1,processData:!1,beforeSend:function(){H.Loading.show()},success:function(e){0==e.code?t.renderList(e.data):H.alert(e.msg)},error:function(){},complete:function(){H.Loading.hide()}})},renderList:function(t){var e=this,n={},i="";$.each(t,function(t,e){$.each(e,function(t,e){"list"!=t&&"per"!=t&&"department_name"!=t&&(n[t]||(n[t]=0),n[t]+=e)})}),n.per=1*(n.actual_arrive/n.should_arrive*100).toFixed(1),e.parent.modules.edit.data={list:t,total:n},i=H.template($("#J-list-tpl").html(),e.parent.modules.edit.data),$("#J-table-wrap").html(i)},bindEvents:function(){var t=this;$("#J-upload-btn").on("click",function(){t.importData()}),$("#J-form").find("input[type=file]").on("change",function(t){$(this).next().text(t.currentTarget.files[0].name)})}}},{}]},{},[1]);